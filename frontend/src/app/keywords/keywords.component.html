<div class="container">
  <h1>Keyword Model Setings</h1>
  <mat-grid-list cols="8" rows="3" gutterSize="32px" rowHeight="1:1.3">
    <mat-grid-tile [colspan]="3" [rowspan]="1">
      <div>
        <mat-form-field>
          <mat-label>Add Dimension ...</mat-label>
          <input matInput type="text" [(ngModel)]=newDimension (keyup.enter)="onDimEnter()">
        </mat-form-field>
        <br>
        <mat-form-field>
          <mat-label>Add Keyword ...</mat-label>
          <input matInput type="text" [(ngModel)]=newKeyword (keyup.enter)="onKeyEnter()">
        </mat-form-field>
      </div>
    </mat-grid-tile>
    <mat-grid-tile [colspan]="2" [rowspan]="3" class="no-center">
      <div class="list-flex">
        <div class="list-container">
          <h2>Keywords</h2>
          <mat-selection-list [multiple]="false">
            <mat-list-option *ngFor="let keyword of keywords">
              {{keyword}}
            </mat-list-option>
          </mat-selection-list>
        </div>
      </div>
    </mat-grid-tile>
    <mat-grid-tile [colspan]="3" [rowspan]="3">
      <div class="list-flex">
        <div class="list-container">
          <h2>Hierarchy</h2>
          <!-- <div class="example-container">
                <div 
                  cdkDropList
                  #hierarchyList="cdkDropList"
                  [cdkDropListData]="done"
                  [cdkDropListConnectedTo]="[uncatDimensionsList, uncatKeywordsList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  <div class="example-box" *ngFor="let item of done" cdkDrag>{{item}}</div>
                </div>
              </div> -->
          <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding cdkDropList #hirerchyKeywordList="cdkDropList" [cdkDropListData]="hirerchyKeywords" (cdkDropListDropped)="handleDrop($event, node);" [cdkDropListConnectedTo]="[uncatDimensionsList]">
              <button mat-icon-button disabled></button>
              <div class="checklist-leaf-node"
                [ngClass]="{'drop-above': dragNodeExpandOverArea === 'above' && dragNodeExpandOverNode === node,
                                            'drop-below': dragNodeExpandOverArea === 'below' && dragNodeExpandOverNode === node,
                                            'drop-center': dragNodeExpandOverArea === 'center' && dragNodeExpandOverNode === node}"
                [checked]="checklistSelection.isSelected(node)" (change)="checklistSelection.toggle(node);"
                draggable="true" (dragstart)="handleDragStart($event, node);" (dragover)="handleDragOver($event, node);"
                (drop)="handleDrop($event, node);" (dragend)="handleDragEnd($event);"
                cdkDropList #hirerchyKeywordList="cdkDropList" [cdkDropListData]="hirerchyKeywords" (cdkDropListDropped)="handleDrop($event, node);" [cdkDropListConnectedTo]="[uncatDimensionsList]"
               >{{node.item}}</div>
            </mat-tree-node>

            <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding cdkDropList #hirerchyKeywordList="cdkDropList" [cdkDropListData]="hirerchyKeywords" (cdkDropListDropped)="handleDrop($event, node);" [cdkDropListConnectedTo]="[uncatDimensionsList]">
              <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.filename">
                <mat-icon class="mat-icon-rtl-mirror">
                  {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                </mat-icon>
              </button>
              <div
                [ngClass]="{'drop-above': dragNodeExpandOverArea === 'above' && dragNodeExpandOverNode === node,
                                            'drop-below': dragNodeExpandOverArea === 'below' && dragNodeExpandOverNode === node,
                                            'drop-center': dragNodeExpandOverArea === 'center' && dragNodeExpandOverNode === node}"
                draggable="true" (dragstart)="handleDragStart($event, node);" (dragover)="handleDragOver($event, node);"
                (drop)="handleDrop($event, node);" (dragend)="handleDragEnd($event);"
                [checked]="descendantsAllSelected(node)" [indeterminate]="descendantsPartiallySelected(node)"
                (change)="todoItemSelectionToggle(node)"
                cdkDropList #hirerchyKeywordList="cdkDropList" [cdkDropListData]="hirerchyKeywords" (cdkDropListDropped)="handleDrop($event, node);" [cdkDropListConnectedTo]="[uncatDimensionsList]"
                >{{node.item}}</div>
            </mat-tree-node>
          </mat-tree>

          <span #emptyItem></span>
        </div>
      </div>
    </mat-grid-tile>
    <mat-grid-tile [colspan]="3" [rowspan]="3">
      <div class="list-flex">
        <div class="list-container">
          <h2>Uncategorized Dimensions</h2>
          <div>
            <div class="example-box" *ngFor="let item of uncatDimensions"  draggable="true" (dragstart)="handleDragStart($event, item, true);" (dragover)="handleDragOver($event, node);"
                (dragend)="handleDragEnd($event);">
              {{item}}
              <button mat-icon-button (click)="deleteDimension(item)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
        </div>
        <div class="list-container">
          <h2>Uncategorized Keywords</h2>
          <div class="example-box" *ngFor="let item of uncatKeywords"  draggable="true" (dragstart)="handleDragStart($event, item, true);" (dragover)="handleDragOver($event, node);"
                (dragend)="handleDragEnd($event);">
              {{item}}
              <button mat-icon-button (click)="deleteKeyword(item)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
        </div>
      </div>
    </mat-grid-tile>
  </mat-grid-list>
</div>